/*!
 *
 __     __          _ _ _         ____        _       _____     _     _
 \ \   / /_ _ _ __ (_) | | __ _  |  _ \  __ _| |_ __ |_   _|_ _| |__ | | ___  ___
  \ \ / / _` | '_ \| | | |/ _` | | | | |/ _` | __/ _` || |/ _` | '_ \| |/ _ \/ __|
   \ V / (_| | | | | | | | (_| | | |_| | (_| | || (_| || | (_| | |_) | |  __/\__ \
    \_/ \__,_|_| |_|_|_|_|\__,_| |____/ \__,_|\__\__,_||_|\__,_|_.__/|_|\___||___/

 * Copyright (c) 2015 Karl Saunders (http://mobiuswebdesign.co.uk)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 0.0.1
 *
 */
!function(t,e){var i="DataTable";"function"==typeof define&&define.amd?define([],e(i)):"object"==typeof exports?module.exports=e(i):t[i]=e(i)}(this,function(t){"use strict";function e(t,a){if(!(this instanceof e))return new e(name);this.sorters=[],this.paginators=[],this.initialRows=null,this.initialDimensions=[],this.currentPage=1,this.first_page=1,this.onFirstPage=!0,this.onLastPage=!1,this.info={items:0,pages:0,range:0};var s=t.tagName.toLowerCase();if("table"!=s)return void console.warn("ERROR: The selected element ("+s+") is not a table!");if(null===t.tHead&&a.sortable)return void console.warn("ERROR: The sortable option requires table headings!");this.table=t,this.thead=this.table.tHead,this.tbody=this.table.tBodies[0],this.initialRows=Array.prototype.slice.call(this.tbody.rows);var n={perPage:10,navPosition:"both",selectorPosition:"bottom",nextPrev:!0,prevText:"&lsaquo;",nextText:"&rsaquo;",sortable:!1,fixedHeight:!0,info:!0,hideUnusedNavs:!1,perPageSelect:[5,10,15,20,25],change:function(){}};this.options=i(n,a),this.initialize()}var i=function(t,e){var i;for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},a=function(t){var e;return isNaN(t)?!1:(e=parseFloat(t),(0|e)===e)},s=function(t){return Math.max(t.scrollWidth,t.offsetWidth,t.clientWidth)},n=function(t){return Math.max(t.scrollHeight,t.offsetHeight,t.clientHeight)},o=function(t,e){var i=document.createElement(t);if(e)for(var a in e)i.setAttribute(a,e[a]);return i},r=function(t,e){var i,a;1===e?(i=0,a=t.length):-1===e&&(i=t.length-1,a=-1);for(var s=!0;s;){s=!1;for(var n=i;n!=a;n+=e)if(t[n+e]&&t[n].value>t[n+e].value){var o=t[n],r=t[n+e],l=o;t[n]=r,t[n+e]=l,s=!0}}return t},l=function(t,e,i){if("[object Object]"===Object.prototype.toString.call(t))for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.call(i,a,t[a],t);else for(var s=0,n=t.length;n>s;s++)e.call(i,s,t[s],t)};return e.prototype={initialize:function(){this.setInitialDimensions(),this.initPages(),this.build()},setInitialDimensions:function(){var t=this,e=t.table.tHead.rows[0].cells,i=s(t.table);l(e,function(e,a){var n=s(a)/i*100;t.initialDimensions.push(n),a.style.width=n+"%"})},initPages:function(){var t=this;this.pages=this.initialRows.map(function(e,i){return i%t.options.perPage===0?t.initialRows.slice(i,i+t.options.perPage):null}).filter(function(t){return t}),this.info.items=this.initialRows.length,this.info.pages=this.pages.length,this.last_page=this.info.pages},build:function(){var t=o("div",{"class":"dataTable-top"}),e=o("div",{"class":"dataTable-bottom"}),i=o("div",{"class":"dataTable-wrapper"});this.tableContainer=o("div",{"class":"dataTable-container"}),this.label=o("div",{"class":"dataTable-info"}),this.selector=this.getSelector(),this.table.parentNode.insertBefore(i,this.table),this.tableContainer.appendChild(this.table),e.appendChild(this.label),i.appendChild(t),i.appendChild(this.tableContainer),i.appendChild(e),t.appendChild(this.selector),this.showPage(),this.options.info&&this.updateInfo();var a=o("ul",{"class":"dataTable-pagination"});switch(this.paginators.push(a),this.options.navPosition){case"top":t.appendChild(a);break;case"bottom":e.appendChild(a);break;case"both":var s=o("ul",{"class":"dataTable-pagination"});this.paginators.push(s),t.appendChild(a),e.appendChild(s)}this.setButtons(),this.options.sortable&&this.initSortable(),this.options.fixedHeight&&(this.tableContainer.style.height=n(this.tableContainer)+"px"),this.table.classList.add("dataTable-table"),this.addEventListeners()},addEventListeners:function(){var t=this;l(t.paginators,function(e,i){i.addEventListener("click",t.switchPage.bind(t),!1)}),t.selector.addEventListener("change",t.updateTable.bind(t),!1)},switchPage:function(t){t=t||window.event;var e=t.target,i=e.tagName.toLowerCase();if("a"==i){t.preventDefault();var s=e.getAttribute("data-page");if(s!=this.currentPage||!e.parentNode.classList.contains("active")){if(a(s)&&(this.currentPage=parseInt(s,10)),this.options.nextPrev){if("prev"==s){if(this.onFirstPage)return;this.currentPage--}if("next"==s){if(this.onLastPage)return;this.currentPage++}}switch(this.currentPage){case 1:this.onFirstPage=!0,this.onLastPage=!1;break;case this.last_page:this.onFirstPage=!1,this.onLastPage=!0}this.showPage(this.currentPage-1),this.options.info&&this.updateInfo(),this.setClasses(),this.options.change(this)}}},showPage:function(t){t=t||0;var e=this,i=document.createDocumentFragment();this.tbody.innerHTML="",l(this.pages[t],function(t,e){i.appendChild(e)}),e.tbody.appendChild(i)},updateInfo:function(){this.info.pages<=1&&(this.label.innerHTML=null);var t=this.currentPage-1,e=t*this.options.perPage,i=e+this.pages[t].length;this.label.innerHTML="Showing "+(e+1)+" to "+i+" of "+this.info.items+" rows"},setButtons:function(){var t=this;l(t.paginators,function(e,i){i.innerHTML="",t.pages.length<=1||(t.options.nextPrev&&i.appendChild(t.getButton("prev")),l(t.pages,function(t,e){var a=o("li",{"class":0==t?"active":""}),s=o("a",{href:"#","data-page":t+1}),n=document.createTextNode(t+1);s.appendChild(n),a.appendChild(s),i.appendChild(a)}),t.options.nextPrev&&i.appendChild(t.getButton("next")))})},setClasses:function(t){var e=this,i=e.onFirstPage,a=e.onLastPage,s=e.options.nextPrev,n=e.options.hideUnusedNavs;l(e.paginators,function(t,o){var r=o.children,h=n?"hidden":"disabled";l(r,function(t,e){e.classList.remove("active","disabled","hidden")}),i&&o.firstElementChild.classList.add(h),a&&o.lastElementChild.classList.add(h);var c=s?e.currentPage:e.currentPage-1;o.children[c].classList.add("active")})},getButton:function(t){var e=o("li"),i=o("a",{href:"#","data-page":t});return i.innerHTML="prev"==t?this.options.prevText:this.options.nextText,e.appendChild(i),e},updateTable:function(t){t=t||window.event;var e=t.target;"select"==e.nodeName.toLowerCase()&&(this.options.perPage=parseInt(e.value,10)),this.tableContainer.style.height=null,this.initPages(),this.showPage(),this.setButtons(),this.options.info&&this.updateInfo(),this.tableContainer.style.height=n(this.tableContainer)+"px"},initSortable:function(){var t=this,e=t.thead.rows[0].cells;l(e,function(e,i){var a=i.innerHTML,s=o("a",{href:"#","class":"dataTable-sorter"});i.cIdx=e,i.innerHTML=null,i.className="asc",i.appendChild(s),s.innerHTML=a,s.onclick=function(e){return function(e){return t.sortItems(e),!1}}(this)})},sortItems:function(t){t=t||window.event;var e=this,i=t.target;if("a"==i.nodeName.toLowerCase()){for(var a=e.initialRows,s=[],n=[],o=0,h=0,c=i.parentElement,d=c.cIdx,p=0;a[p];p++){var u=a[p].cells[d],f=u.textContent?u.textContent:u.innerText,g=f.replace(/(\$|\,|\s)/g,"");parseFloat(g)==g?n[h++]={value:Number(g),row:a[p]}:s[o++]={value:f,row:a[p]}}var v,b;c.classList.contains("asc")?(v=r(s,-1),b=r(n,-1),c.classList.remove("asc"),c.classList.add("desc")):(v=r(n,1),b=r(s,1),c.classList.contains("desc")?(c.classList.remove("desc"),c.classList.add("asc")):c.classList.add("asc")),this.lastSortedTh&&c!=this.lastSortedTh&&this.lastSortedTh.classList.remove("desc","asc"),this.lastSortedTh=c;var a=v.concat(b);this.initialRows=[],l(a,function(t,i){e.initialRows.push(i.row)}),e.updateTable(t)}},getSelector:function(){var t=o("select",{"class":"form-control dataTable-selector"});return l(this.options.perPageSelect,function(e,i){var a=o("option");a.value=i,a.innerHTML=i,t.appendChild(a)}),t.value=this.options.perPage,t}},e});