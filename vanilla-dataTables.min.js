/*!
 *
 __     __          _ _ _         ____        _       _____     _     _
 \ \   / /_ _ _ __ (_) | | __ _  |  _ \  __ _| |_ __ |_   _|_ _| |__ | | ___  ___
  \ \ / / _` | '_ \| | | |/ _` | | | | |/ _` | __/ _` || |/ _` | '_ \| |/ _ \/ __|
   \ V / (_| | | | | | | | (_| | | |_| | (_| | || (_| || | (_| | |_) | |  __/\__ \
    \_/ \__,_|_| |_|_|_|_|\__,_| |____/ \__,_|\__\__,_||_|\__,_|_.__/|_|\___||___/

 * Copyright (c) 2015 Karl Saunders (http://mobiuswebdesign.co.uk)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 0.0.1
 *
 */
!function(t,e){var i="DataTable";"function"==typeof define&&define.amd?define([],e(i)):"object"==typeof exports?module.exports=e(i):t[i]=e(i)}(this,function(t){"use strict";function e(t,a){if(!(this instanceof e))return new e(name);this.sorters=[],this.paginators=[],this.initialRows=null,this.initialDimensions=[],this.currentPage=1,this.first_page=1,this.onFirstPage=!0,this.onLastPage=!1,this.info={items:0,pages:0,range:0};var s=t.tagName.toLowerCase();if("table"!=s)return console.warn("The selected element ("+s+") is not a table!"),!1;this.table=t,this.thead=this.table.tHead,this.tbody=this.table.tBodies[0],this.initialRows=Array.prototype.slice.call(this.tbody.rows);var n={perPage:10,navPosition:"both",selectorPosition:"bottom",nextPrev:!0,prevText:"&lsaquo;",nextText:"&rsaquo;",sortable:!1,fixedHeight:!0,info:!0,hideUnusedNavs:!1,perPageSelect:[5,10,15,20,25],change:function(){}};this.options=i(n,a),this.initialize()}var i=function(t,e){var i;for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},a=function(t){var e;return isNaN(t)?!1:(e=parseFloat(t),(0|e)===e)},s=function(t){return Math.max(t.scrollWidth,t.offsetWidth,t.clientWidth)},n=function(t){return Math.max(t.scrollHeight,t.offsetHeight,t.clientHeight)},r=function(t,e){var i=document.createElement(t);if(e)for(var a in e)i.setAttribute(a,e[a]);return i},o=function(t,e){var i,a;1===e?(i=0,a=t.length):-1===e&&(i=t.length-1,a=-1);for(var s=!0;s;){s=!1;for(var n=i;n!=a;n+=e)if(t[n+e]&&t[n].value>t[n+e].value){var r=t[n],o=t[n+e],l=r;t[n]=o,t[n+e]=l,s=!0}}return t},l=function(t,e,i){if("[object Object]"===Object.prototype.toString.call(t))for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.call(i,a,t[a],t);else for(var s=0,n=t.length;n>s;s++)e.call(i,s,t[s],t)};return e.prototype={initialize:function(){this.setInitialDimensions(),this.initPages(),this.build()},build:function(){var t=r("div",{"class":"dataTable-top"}),e=r("div",{"class":"dataTable-bottom"}),i=r("div",{"class":"dataTable-wrapper"});this.tableContainer=r("div",{"class":"dataTable-container"}),this.label=r("div",{"class":"dataTable-info"}),this.selector=this.getSelector(),this.table.parentNode.insertBefore(i,this.table),this.tableContainer.appendChild(this.table),e.appendChild(this.label),i.appendChild(t),i.appendChild(this.tableContainer),i.appendChild(e),t.appendChild(this.selector),this.updatePages(),this.options.info&&this.updateInfo();var a=r("ul",{"class":"dataTable-pagination"});switch(this.paginators.push(a),this.options.navPosition){case"top":t.appendChild(a);break;case"bottom":e.appendChild(a);break;case"both":var s=r("ul",{"class":"dataTable-pagination"});this.paginators.push(s),t.appendChild(a),e.appendChild(s)}this.updateLinks(),this.options.sortable&&this.initSortable(),this.options.fixedHeight&&(this.tableContainer.style.height=n(this.tableContainer)+"px"),this.addEventListeners()},initSortable:function(){var t=this,e=t.thead.rows[0].cells;l(e,function(e,i){var a=i.innerHTML,s=r("a",{href:"#","class":"dataTable-sorter"});i.cIdx=e,i.innerHTML=null,i.className="asc",i.appendChild(s),s.innerHTML=a,s.onclick=function(e){return function(e){return t.sortItems(e),!1}}(this)})},initPages:function(){var t=this;this.pages=this.initialRows.map(function(e,i){return i%t.options.perPage===0?t.initialRows.slice(i,i+t.options.perPage):null}).filter(function(t){return t}),this.info.items=this.initialRows.length,this.info.pages=this.pages.length,this.last_page=this.info.pages},updatePages:function(t){t=t||0;var e=this,i=document.createDocumentFragment();this.tbody.innerHTML="",l(this.pages[t],function(t,e){i.appendChild(e)}),e.tbody.appendChild(i)},addEventListeners:function(){var t=this;l(t.paginators,function(e,i){i.addEventListener("click",t.switchPage.bind(t),!1)}),t.selector.addEventListener("change",t.updateItems.bind(t),!1)},removeEventListeners:function(){this.links.removeEventListener("click",this.switchPage),this.selector.removeEventListener("click",this.switchItems)},switchPage:function(t){t=t||window.event;var e=t.target,i=e.nodeName.toLowerCase();if("a"==i||"i"==i){"i"==i&&(e=e.parentNode),t.preventDefault(),this.onFirstPage=!1,this.onLastPage=!1;var s=e.getAttribute("data-page");if(s==this.currentPage&&e.parentNode.classList.contains("active"))return!1;if(a(s)&&(this.currentPage=parseInt(s,10)),this.options.nextPrev){if("prev"==s){if(this.currentPage-1<1)return!1;this.currentPage--}if("next"==s){if(this.currentPage+1>this.last_page)return!1;this.currentPage++}}switch(this.currentPage){case 1:this.onFirstPage=!0;break;case this.last_page:this.onLastPage=!0}this.updatePages(this.currentPage-1),this.options.info&&this.updateInfo(),this.setClasses(),this.options.change(this)}},setClasses:function(t){var e=this,i=e.onFirstPage,a=e.onLastPage,s=e.options.nextPrev,n=e.options.hideUnusedNavs;l(e.paginators,function(t,r){var o=r.children;l(o,function(t,e){e.classList.remove("active","disabled","hidden")}),i&&r.firstElementChild.classList.add(n?"hidden":"disabled"),a&&r.lastElementChild.classList.add(n?"hidden":"disabled"),s?r.children[e.currentPage].classList.add("active"):r.children[e.currentPage-1].classList.add("active")})},updateInfo:function(){this.info.pages<=1&&(this.label.innerHTML="");var t=this.currentPage-1,e=t*this.options.perPage,i=e+this.pages[t].length;this.label.innerHTML="Showing "+(e+1)+" to "+i+" of "+this.info.items+" rows"},getSelector:function(){var t=r("select",{"class":"form-control dataTable-selector"});return l(this.options.perPageSelect,function(e,i){var a=r("option");a.value=i,a.innerHTML=i,t.appendChild(a)}),t.value=this.options.perPage,t},updateLinks:function(){var t=this;l(t.paginators,function(e,i){return i.innerHTML="",t.pages.length<=1?!1:(t.options.nextPrev&&i.appendChild(t.getNav("prev")),l(t.pages,function(t,e){var a=r("li",{"class":0==t?"active":""}),s=r("a",{href:"#","data-page":t+1}),n=document.createTextNode(t+1);s.appendChild(n),a.appendChild(s),i.appendChild(a)}),void(t.options.nextPrev&&i.appendChild(t.getNav("next"))))})},getNav:function(t){var e=r("li"),i=r("a",{href:"#","data-page":t});return i.innerHTML="prev"==t?this.options.prevText:this.options.nextText,e.appendChild(i),e},setInitialDimensions:function(){for(var t=this.table.tHead.rows[0].cells,e=s(this.table),i=0,a=t.length;a>i;i++){var n=s(t[i])/e*100;this.initialDimensions.push(n),t[i].style.width=n+"%"}},updateItems:function(t){t=t||window.event;var e=t.target;this.currentPage=1,"select"==e.nodeName.toLowerCase()&&(this.options.perPage=parseInt(e.value,10)),this.tableContainer.style.height=null,this.initPages(),this.updatePages(),this.updateLinks(),this.options.info&&this.updateInfo(),this.tableContainer.style.height=n(this.tableContainer)+"px"},sortItems:function(t){t=t||window.event;var e=this,i=t.target;if("a"!=i.nodeName.toLowerCase())return!1;for(var a=e.initialRows,s=[],n=[],r=0,l=0,h=i.parentElement,c=h.cIdx,d=0;a[d];d++){var p=a[d].cells[c],u=p.textContent?p.textContent:p.innerText,f=u.replace(/(\$|\,|\s)/g,"");parseFloat(f)==f?n[l++]={value:Number(f),row:a[d]}:s[r++]={value:u,row:a[d]}}var g,v;h.className.match("asc")?(g=o(s,-1),v=o(n,-1),h.className=h.className.replace(/asc/,"desc")):(g=o(n,1),v=o(s,1),h.className.match("desc")?h.className=h.className.replace(/desc/,"asc"):h.className+="asc"),this.lastSortedTh&&h!=this.lastSortedTh&&(this.lastSortedTh.className=this.lastSortedTh.className.replace(/desc|asc/g,"")),this.lastSortedTh=h;var a=g.concat(v);this.initialRows=[];for(var b in a)e.initialRows.push(a[b].row);e.updateItems(t)}},e});